{
   "constantName": "pbadm.PageRoles",
   "extendsPage": null,
   "modelView": "{\n      \"type\": \"page\",\n      \"name\": \"pbadmPageRoles\",\n      \"components\": [\n            {\n                  \"name\": \"pageRoles\",\n                  \"type\": \"resource\",\n                  \"resource\": \"virtualDomains.pbadmPageRoles\"\n            },\n            {\n                  \"name\": \"pageLookup\",\n                  \"type\": \"resource\",\n                  \"resource\": \"virtualDomains.pbadmPageLookup\"\n            },\n            {\n                  \"name\": \"webTailorRolesLookup\",\n                  \"type\": \"resource\",\n                  \"resource\": \"virtualDomains.pbadmWebTailorRoles\"\n            },\n            {\n                  \"name\": \"pagesecurity\",\n                  \"type\": \"resource\",\n                  \"resource\": \"pagesecurity\",\n                  \"staticData\": []\n            },\n            {\n                  \"name\": \"SelectPageBlock\",\n                  \"type\": \"block\",\n                  \"label\": \"\",\n                  \"showInitially\": true,\n                  \"components\": [\n                        {\n                              \"name\": \"selectPage\",\n                              \"type\": \"select\",\n                              \"labelKey\": \"CONSTANT_NAME\",\n                              \"valueKey\": \"PID\",\n                              \"label\": \"Page\",\n                              \"sourceModel\": \"pageLookup\",\n                              \"sourceParameters\": {},\n                              \"model\": \"selectPage\",\n                              \"onUpdate\": \"$editPageRoles.$load();\\n$EditRolesForm.$visible=$selectPage;\\n$roleName.$populateSource();\\n$ApplyRolesForm.$visible=$selectPage;\",\n                              \"required\": false,\n                              \"placeholder\": \"Select...\",\n                              \"loadInitially\": true\n                        }\n                  ]\n            },\n            {\n                  \"name\": \"EditRolesForm\",\n                  \"type\": \"form\",\n                  \"showInitially\": false,\n                  \"components\": [\n                        {\n                              \"name\": \"editPageRoles\",\n                              \"type\": \"grid\",\n                              \"model\": \"pageRoles\",\n                              \"label\": \"Edit Roles for selected page\",\n                              \"parameters\": {\n                                    \"PAGE_ID\": \"$selectPage\"\n                              },\n                              \"allowNew\": true,\n                              \"allowModify\": true,\n                              \"allowDelete\": true,\n                              \"allowReload\": true,\n                              \"pageSize\": 5,\n                              \"components\": [\n                                    {\n                                          \"name\": \"roleName\",\n                                          \"type\": \"select\",\n                                          \"labelKey\": \"DESCRIPTION\",\n                                          \"valueKey\": \"CODE\",\n                                          \"documentation\": \"Should have some way to forbid selecting existing roles for this domain...\",\n                                          \"label\": \"Role\",\n                                          \"sourceModel\": \"webTailorRolesLookup\",\n                                          \"sourceParameters\": {},\n                                          \"model\": \"ROLE_NAME\",\n                                          \"onUpdate\": \"\",\n                                          \"required\": true,\n                                          \"placeholder\": \"Select unique role...\",\n                                          \"value\": \"\",\n                                          \"loadInitially\": true\n                                    },\n                                    {\n                                          \"name\": \"pageID\",\n                                          \"type\": \"hidden\",\n                                          \"value\": \"$selectPage\",\n                                          \"model\": \"PAGE_ID\",\n                                          \"loadInitially\": true\n                                    },\n                                    {\n                                          \"name\": \"allow\",\n                                          \"type\": \"boolean\",\n                                          \"label\": \"Allow Access\",\n                                          \"value\": \"1\",\n                                          \"booleanTrueValue\": \"1\",\n                                          \"booleanFalseValue\": \"0\",\n                                          \"readonly\": false,\n                                          \"model\": \"ALLOW\",\n                                          \"onUpdate\": \"\",\n                                          \"loadInitially\": true\n                                    }\n                              ],\n                              \"submit\": \"gridsubmit\",\n                              \"loadInitially\": false,\n                              \"onSaveSuccess\": \"var saveAction = \\\"saved\\\";\\n\\nif (response.hasOwnProperty(\\\"id\\\") && !_.findWhere($editPageRolesDS.data,     {ROLE_NAME: response.ROLE_NAME}))\\n  {\\n    saveAction = \\\"deleted\\\";\\n  }\\nalert( \\\"Page role \\\" + response.ROLE_NAME + \\\" \\\" + saveAction,\\\"\\\",\\\"success\\\",true,[]);\",\n                              \"onError\": \"var errorMessage = response.data.errors.errorMessage;\\nif (errorMessage.indexOf(\\\"ORA-20000\\\") > -1) {\\n  alert(\\\"An entry already exists for this page and role, cannot add a duplicate\\\");\\n} else {\\n  alert(response.data.errors.errorMessage);\\n}\",\n                              \"onSave\": \"\"\n                        }\n                  ],\n                  \"nextButtonLabel\": \"Next\"\n            },\n            {\n                  \"name\": \"ApplyRolesForm\",\n                  \"type\": \"form\",\n                  \"nextButtonLabel\": \"\",\n                  \"showInitially\": false,\n                  \"components\": [\n                        {\n                              \"name\": \"applyRolesButton\",\n                              \"type\": \"button\",\n                              \"label\": \"Apply page roles\",\n                              \"onClick\": \"console.log('Apply pressed');\\n$pagesecurity.$post({pageId:$selectPage});\"\n                        }\n                  ],\n                  \"submitLabel\": \"\",\n                  \"submit\": \"\"\n            }\n      ],\n      \"documentation\": \"Associate Roles with a Page\",\n      \"title\": \"Associate Roles with a Page\",\n      \"scriptingLanguage\": \"JavaScript\",\n      \"label\": \"Page Roles\"\n}",
   "compiledView": null,
   "compiledController": null,
   "version": null,
   "lastUpdated": null,
   "extensions": null,
   "dateCreated": null,
   "id": null,
   "fileTimestamp": "2013-12-05T09:16:56Z",
   "pageRoles": [{
      "allow": true,
      "roleName": "WTAILORADMIN",
      "id": null,
      "page": {
         "_ref": "../..",
         "class": "net.hedtech.banner.sspb.Page"
      },
      "class": "net.hedtech.banner.sspb.PageRole",
      "version": null
   }],
   "class": "net.hedtech.banner.sspb.Page"
}