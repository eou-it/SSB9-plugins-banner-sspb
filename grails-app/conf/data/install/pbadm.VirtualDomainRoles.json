{
   "constantName": "pbadm.VirtualDomainRoles",
   "extendsPage": null,
   "fileTimestamp": "2019-02-11T13:54:06Z",
   "modelView": {
      "components": [
         {
            "name": "virtualDomainRoles",
            "resource": "virtualDomains.pbadmVirtualDomainRoles",
            "staticData": [],
            "type": "resource"
         },
         {
            "name": "virtualDomainLookup",
            "resource": "virtualDomains.pbadmVirtualDomainLookup",
            "staticData": [],
            "type": "resource"
         },
         {
            "name": "webTailorRolesLookup",
            "resource": "virtualDomains.pbadmWebAdminRoles",
            "staticData": [],
            "type": "resource"
         },
         {
            "components": [
               {
                  "label": "Virtual Domain",
                  "labelKey": "SERVICE_NAME",
                  "loadInitially": true,
                  "model": "selectVirtualDomain",
                  "name": "selectVirtualDomain",
                  "onLoad": "$editVirtualDomainRoles.$load();$EditRolesForm.$visible=$selectVirtualDomain; $roleName.$populateSource();",
                  "onUpdate": "$editVirtualDomainRoles.$load();\n$EditRolesForm.$visible=$selectVirtualDomain;\n $roleName.$populateSource();",
                  "placeholder": "Select...",
                  "required": false,
                  "sourceModel": "virtualDomainLookup1",
                  "sourceParameters": {},
                  "style": "rTableCell",
                  "type": "select",
                  "valueKey": "VID",
                  "valueStyle": "popupSelectBox pbPopupDataGrid:{'serviceNameType':'virtualdomains','id':'selectVirtualDomain','isPbPage':'true'}"
               },
               {
                  "label": "Virtual Domain Composer",
                  "name": "virtualDomainComposerButton",
                  "onClick": "var baseUrl = location.origin; \nvar path = \"/BannerExtensibility/virtualDomainComposer/loadVirtualDomain\";\nvar url = baseUrl + path;\nif($selectVirtualDomain && $CONSTANT_NAME){\nurl = url+'?id='+$selectVirtualDomain+'&name='+$CONSTANT_NAME;\n}\nlocation.assign(url);",
                  "style": "col-sm-6 rTableCell divAlignToRight",
                  "type": "button",
                  "valueStyle": "primary"
               }
            ],
            "label": "",
            "name": "SelectVirtualDomainBlock",
            "showInitially": true,
            "style": "col-sm-12 rTable",
            "type": "block"
         },
         {
            "components": [
               {
                  "allowDelete": true,
                  "allowModify": true,
                  "allowNew": true,
                  "allowReload": true,
                  "components": [
                     {
                        "documentation": "Should have some way to forbid selecting existing roles for this domain...",
                        "label": "Role",
                        "labelKey": "DESCRIPTION",
                        "loadInitially": true,
                        "model": "ROLE_NAME",
                        "name": "roleName",
                        "onUpdate": "",
                        "placeholder": "Select unique role...",
                        "required": true,
                        "sourceModel": "webTailorRolesLookup",
                        "sourceParameters": {},
                        "type": "select",
                        "value": "",
                        "valueKey": "CODE"
                     },
                     {
                        "booleanFalseValue": "0",
                        "booleanTrueValue": "1",
                        "label": "Allow All",
                        "loadInitially": true,
                        "model": "",
                        "name": "allowAll",
                        "onUpdate": "currentSelection.ALLOW_GET=currentSelection.allowAll;\ncurrentSelection.ALLOW_POST=currentSelection.allowAll;\ncurrentSelection.ALLOW_PUT=currentSelection.allowAll;\ncurrentSelection.ALLOW_DELETE=currentSelection.allowAll;",
                        "readonly": false,
                        "type": "boolean",
                        "value": "0"
                     },
                     {
                        "booleanFalseValue": "0",
                        "booleanTrueValue": "1",
                        "label": "Allow Get",
                        "loadInitially": true,
                        "model": "ALLOW_GET",
                        "name": "allowGet",
                        "onUpdate": "",
                        "readonly": false,
                        "type": "boolean",
                        "value": "1"
                     },
                     {
                        "booleanFalseValue": "0",
                        "booleanTrueValue": "1",
                        "label": "Allow Post",
                        "loadInitially": true,
                        "model": "ALLOW_POST",
                        "name": "allowPost",
                        "readonly": false,
                        "type": "boolean",
                        "value": "0"
                     },
                     {
                        "booleanFalseValue": "0",
                        "booleanTrueValue": "1",
                        "label": "Allow Put",
                        "loadInitially": true,
                        "model": "ALLOW_PUT",
                        "name": "allowPut",
                        "readonly": false,
                        "type": "boolean",
                        "value": "0"
                     },
                     {
                        "booleanFalseValue": "0",
                        "booleanTrueValue": "1",
                        "label": "Allow Delete",
                        "loadInitially": true,
                        "model": "ALLOW_DELETE",
                        "name": "allowDelete",
                        "readonly": false,
                        "type": "boolean",
                        "value": "0"
                     },
                     {
                        "loadInitially": true,
                        "model": "VIRTUAL_DOMAIN_ID",
                        "name": "virtualDomainID",
                        "type": "hidden",
                        "value": "$selectVirtualDomain"
                     }
                  ],
                  "label": "Edit Roles for selected virtual domain",
                  "loadInitially": true,
                  "model": "virtualDomainRoles",
                  "name": "editVirtualDomainRoles",
                  "onError": "var errorMessage =response.data.errors? response.data.errors.errorMessage: null;\nif (errorMessage && errorMessage.indexOf(\"ORA-20000\") > -1) {\n  alert(\"An entry already exists for this virtual domain and role, cannot add a duplicate\", {type:\"error\"});\n} else {\n   alert( errorMessage?errorMessage:response.data, {type:\"error\"});\n}",
                  "onSaveSuccess": "var saveAction = \"saved\";\n\nif (action == 'D')\n  {\n    saveAction = \"deleted\";\n  }\nalert( \"Virtual Domain role \" + response.ROLE_NAME  + ' ' + saveAction,{type:\"success\", flash:true});",
                  "pageSize": 5,
                  "parameters": {
                     "VIRTUAL_DOMAIN_ID": "$selectVirtualDomain"
                  },
                  "type": "grid"
               }
            ],
            "name": "EditRolesForm",
            "showInitially": false,
            "type": "block"
         }
      ],
      "documentation": "Associate Roles with a virtual domain",
      "label": "Virtual Domain Roles",
      "name": "pbadmVirtualDomainRoles",
      "scriptingLanguage": "JavaScript",
      "title": "Associate Roles with a virtual domain",
      "type": "page"
   },
   "pageRoles": [
      {
         "roleName": "ADMIN-GPBADMN",
         "allow": true
      }
   ]
}